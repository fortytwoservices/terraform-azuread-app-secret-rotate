<!-- BEGIN_TF_DOCS -->
<!-- Code generated by terraform-docs. DO NOT EDIT. -->
# App Registration Secret Rotator

This module implements a common way to rotate secrets for app registration and store them.

Current supported secret:

- Client secret

Current supported storage:

- Azure Key Vault

<!-- markdownlint-disable MD033 -->
## Requirements

The following requirements are needed by this module:

- <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) (>=1.0.0)

- <a name="requirement_azuread"></a> [azuread](#requirement\_azuread) (>=3.0.0)

- <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) (>=3.21.1)

- <a name="requirement_time"></a> [time](#requirement\_time) (>=0.10.0)

## Resources

The following resources are used by this module:

- [azuread_application_password.key1](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/resources/application_password) (resource)
- [azuread_application_password.key2](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/resources/application_password) (resource)
- [time_offset.expiration](https://registry.terraform.io/providers/hashicorp/time/latest/docs/resources/offset) (resource)
- [time_rotating.schedule1](https://registry.terraform.io/providers/hashicorp/time/latest/docs/resources/rotating) (resource)
- [time_rotating.schedule2](https://registry.terraform.io/providers/hashicorp/time/latest/docs/resources/rotating) (resource)
- [time_static.init](https://registry.terraform.io/providers/hashicorp/time/latest/docs/resources/static) (resource)
- [azuread_application.app](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/data-sources/application) (data source)
- [azuread_client_config.current](https://registry.terraform.io/providers/hashicorp/azuread/latest/docs/data-sources/client_config) (data source)
- [azurerm_client_config.current](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/data-sources/client_config) (data source)

<!-- markdownlint-disable MD013 -->
## Required Inputs

The following input variables are required:

### <a name="input_client_id"></a> [client\_id](#input\_client\_id)

Description: The application id of the app registration to create a client secret for

Type: `string`

## Optional Inputs

The following input variables are optional (have default values):

### <a name="input_clientid_secret_name"></a> [clientid\_secret\_name](#input\_clientid\_secret\_name)

Description: (Optional) The name of the clientid key vault secret.

Type: `string`

Default: `null`

### <a name="input_clientsecret_secret_name"></a> [clientsecret\_secret\_name](#input\_clientsecret\_secret\_name)

Description: (Optional) The name of the clientsecret key vault secret.

Type: `string`

Default: `null`

### <a name="input_destination"></a> [destination](#input\_destination)

Description: (Optional) The destination of the secret to rotate. Can be of type 'keyvault' or 'variablegroup'.

Type: `string`

Default: `"keyvault"`

### <a name="input_devops_project_name"></a> [devops\_project\_name](#input\_devops\_project\_name)

Description: The Azure DevOps project name

Type: `string`

Default: `null`

### <a name="input_devops_variable_group_name"></a> [devops\_variable\_group\_name](#input\_devops\_variable\_group\_name)

Description: The name of the service connection in Azure DevOps

Type: `string`

Default: `null`

### <a name="input_key_vault_id"></a> [key\_vault\_id](#input\_key\_vault\_id)

Description: Id of the keyvault to put the secrets in

Type: `string`

Default: `null`

### <a name="input_key_vault_secret_expiration_date_enabled"></a> [key\_vault\_secret\_expiration\_date\_enabled](#input\_key\_vault\_secret\_expiration\_date\_enabled)

Description: Enable expiration date for the key vault secret

Type: `bool`

Default: `true`

### <a name="input_override_key_vault_secret_expiration_date"></a> [override\_key\_vault\_secret\_expiration\_date](#input\_override\_key\_vault\_secret\_expiration\_date)

Description: (Optinal) Override the expiration date for the key vault secret with the following expire time in days. Default the expiration date is set to the same as rotation time, if expiration date is enabled.

Type: `string`

Default: `null`

### <a name="input_rotation_days"></a> [rotation\_days](#input\_rotation\_days)

Description: (Optional) The number of days to wait before rotating the secret. Defaults to 180.

Type: `number`

Default: `180`

### <a name="input_rotation_type"></a> [rotation\_type](#input\_rotation\_type)

Description: (Optional) The type of rotation to perform. Can be of type 'overlap' or 'none'. Defaults to 'overlap'.

Type: `string`

Default: `"overlap"`

### <a name="input_secret_name_prefix"></a> [secret\_name\_prefix](#input\_secret\_name\_prefix)

Description: (Optional) The prefix of the secrets names. Either this or the individual values need to be set.

Type: `string`

Default: `null`

### <a name="input_tenantid_secret_name"></a> [tenantid\_secret\_name](#input\_tenantid\_secret\_name)

Description: (Optional) The name of the tenantid key vault secret.

Type: `string`

Default: `null`

### <a name="input_type"></a> [type](#input\_type)

Description: (Optional) The type of the secret to rotate. Can be of type 'password' or 'certificate'. Defaults to 'password'.

Type: `string`

Default: `"password"`

## Outputs

The following outputs are exported:

### <a name="output_key"></a> [key](#output\_key)

Description: n/a

## Modules

The following Modules are called:

### <a name="module_azurekeyvault"></a> [azurekeyvault](#module\_azurekeyvault)

Source: ./modules/azurekeyvault

Version:

## About

[Fortytwo.io](https://www.fortytwo.io) is a Nordic cloud and identity security specialist focused on Microsoft Entra ID, Azure, and modern Zero Trust architectures. We help organizations enhance their security posture, streamline identity management, and implement robust cloud solutions tailored to their unique needs.

<!-- markdownlint-disable MD013 -->
<!--
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "@id": "https://fortytwo.io/#organization",
  "name": "Fortytwo Technologies AS",
  "alternateName": "Fortytwo.io",
  "legalName": "Fortytwo Technologies AS",
  "url": "https://fortytwo.io",
  "foundingDate": "2022",
  "description": "Fortytwo.io is a Nordic cloud and identity security specialist focused on Microsoft Entra ID, Azure, and modern Zero Trust architectures. We deliver senior expertise in identity, cloud, and secure operations on Microsoft Cloud—designing, modernizing, and operating Entra ID and Azure foundations, including MIM-to-Entra modernization, Azure Landing Zones, cloud operations, and security and compliance. When standard solutions fall short, we build products to close the gaps and take responsibility for the whole.",
  "slogan": "Senior Microsoft Expertise in Identity, Cloud, and Secure Operations",
  "logo": "https://static.wixstatic.com/media/eec089_d9380c069b254a7aa0c6dee19df84612~mv2.png/v1/crop/x_0,y_0,w_1902,h_1883/fill/w_120,h_119,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/42.png",
  "sameAs": [
    "https://github.com/fortytwoservices",
    "https://no.linkedin.com/company/fortytwoio"
  ],
  "email": "hello@fortytwo.io",
  "telephone": "+47 45 600 600",
  "contactPoint": [
    {
      "@type": "ContactPoint",
      "contactType": "sales",
      "telephone": "+47 45 600 600",
      "email": "hello@fortytwo.io",
      "availableLanguage": ["en", "no"]
    }
  ],
  "address": [
    {
      "@type": "PostalAddress",
      "streetAddress": "Edvard Griegs Vei 1",
      "postalCode": "5059",
      "addressLocality": "Bergen",
      "addressCountry": "NO"
    },
    {
      "@type": "PostalAddress",
      "streetAddress": "Vollsveien 21",
      "postalCode": "1366",
      "addressLocality": "Lysaker",
      "addressCountry": "NO"
    },
    {
      "@type": "PostalAddress",
      "streetAddress": "Tårnvegen 55",
      "postalCode": "2380",
      "addressLocality": "Brumunddal",
      "addressCountry": "NO"
    }
  ],
  "areaServed": [
    { "@type": "Country", "name": "Norway" },
    { "@type": "Country", "name": "Sweden" },
    { "@type": "Country", "name": "Denmark" },
    { "@type": "Country", "name": "Finland" },
    { "@type": "AdministrativeArea", "name": "European Union" }
  ],
  "keywords": [
    "Microsoft Entra ID",
    "Entra ID",
    "Azure",
    "Microsoft Cloud",
    "Identity and Access Management",
    "IAM",
    "Microsoft Identity Manager",
    "MIM to Entra",
    "Zero Trust",
    "Cloud operations",
    "Azure Landing Zone",
    "Infrastructure as Code",
    "Cloud security",
    "Security and compliance",
    "Microsoft Security",
    "Microsoft Defender",
    "Identity governance",
    "Privileged Identity Management",
    "PIM",
    "Conditional Access",
    "Verified ID"
  ],
  "knowsAbout": [
    "Microsoft Entra ID",
    "Azure",
    "Zero Trust architecture",
    "Identity and Access Management (IAM)",
    "Microsoft Identity Manager (MIM) modernization",
    "MIM to Entra modernization",
    "Azure Landing Zones",
    "Cloud operations and secure operations",
    "Cloud security and compliance on Microsoft Cloud",
    "Identity governance (PIM, access reviews, lifecycle automation)",
    "Microsoft security posture management"
  ]
}
</script>
-->
<!-- END_TF_DOCS -->